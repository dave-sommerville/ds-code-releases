<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Global Parallax Controller</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      color: #fff;
      background-size: cover;

    }

    header {
      position: relative;
      overflow: hidden;
      height: 300vh;
    }
    .header.planet {
      background-image: url("https://cdn.pixabay.com/photo/2017/08/15/08/23/stars-2643089_1280.jpg");
    }
    .parallax {
      position: absolute;
      aspect-ratio: 1 / 1;
      width: var(--parallax-size, 200px);
      height: var(--parallax-size, 200px);
      background-size: cover;
      background-position: center;
      border-radius: 10px;
      opacity: 0.8;
      transition: all 0.3s ease;
    }

    .controls {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: rgba(0, 0, 0, 0.85);
      padding: 1rem;
      border-radius: 10px;
      max-width: 300px;
      z-index: 2000;
      overflow-y: auto;
      max-height: 95vh;
    }

    .controls h3 {
      margin-top: 0;
      color: #00d0ff;
      text-align: center;
    }

    .controls label {
      display: block;
      margin: 0.25rem 0;
      font-size: 0.9rem;
    }

    .controls input[type="range"] {
      width: 100%;
    }

    .controls fieldset {
      border: none;
      margin: 0.75rem 0;
    }

    .layer-controls {
      background: rgba(255, 255, 255, 0.05);
      padding: 0.5rem;
      border-radius: 6px;
      margin-bottom: 0.5rem;
    }

    .layer-controls h4 {
      margin: 0.25rem 0;
      font-size: 0.9rem;
      color: #00ffa5;
    }

    .content-placeholder {
      height: 200vh;
      padding: 2rem;
      background: #222;
    }
  </style>
</head>
<body>

  <header id="page-top" class="header f-col">
    <img src="./src/media/amanpreet-deol-1ci4qIfZ1Yo-unsplash.jpg" class="hero-banner" hidden>
    <div class="parallax one"></div>
    <div class="parallax two"></div>
    <div class="parallax three"></div>
    <div class="parallax four"></div>
    <div class="parallax five"></div>
    <div class="parallax six"></div>
    <div class="parallax seven"></div>

    <div style="z-index: 1000; display: flex; flex-direction: column; align-items: center;">
      <h1>theForks.io</h1>
      <img src="./src/media/theforks-logo.svg" alt="theForks.io Logo" style="max-width:200px;">
      <h2>Winnipeg's Open-Source Repository</h2>
      <a href="./portfolio.html" target="_blank" class="btn">Visit the Repo</a>
    </div>
  </header>

  <section class="content-placeholder">
    <h1>Content Below the Header</h1>
    <p>Scroll down to see the parallax effect on the elements in the header!</p>
  </section>

  <!-- === CONTROL PANEL === -->
  <div class="controls">
    <h3>Parallax Controls</h3>

    <!-- Global controls -->
    <fieldset>
      <legend>Global Settings</legend>

      <label for="sizeControl">Size (px):</label>
      <input type="range" id="sizeControl" min="100" max="600" step="10" value="200">

      <fieldset>
        <legend>Background Image</legend>
        <label><input type="radio" name="bgChoice" value="ghost" checked>Ghost</label>
        <label><input type="radio" name="bgChoice" value="planet">Planet</label>
        <label><input type="radio" name="bgChoice" value="guinea-pig">Guinea Pig</label>
        <label><input type="radio" name="bgChoice" value="hamburger">Hamburger</label>
      </fieldset>
    </fieldset>

    <!-- Per-layer speed controls -->
    <fieldset>
      <legend>Layer Speeds</legend>
      <div id="layerSpeedControls"></div>
    </fieldset>
  </div>

  <script>
    function select(selector, scope = document) {
      return scope.querySelector(selector);
    }
    function listen(event, element, callback) {
      return element.addEventListener(event, callback);
    }

    const parallaxLayers = [
      { selector: ".parallax.one", speed: 0.9 },
      { selector: ".parallax.two", speed: 1.0 },
      { selector: ".parallax.three", speed: 0.3 },
      { selector: ".parallax.four", speed: 0.5 },
      { selector: ".parallax.five", speed: 2.0 },
      { selector: ".parallax.six", speed: -0.8 },
      { selector: ".parallax.seven", speed: 1.6 }
    ];
    const bgImages = {
      "ghost": "",
      "guinea-pig": "",
      "hamburger": "",
      "planet": "planet"
    };
    const baseImages = {
      "ghost": "./img/ghost.png",
      "guinea-pig": "./img/guinea-pig.png",
      "hamburger": "./img/hamburger.png",
      "planet": "./img/planet.png"
    };

    // Initialize parallax layers
    parallaxLayers.forEach(({ selector }, i) => {
      const layer = select(selector);
      layer.style.top = `${i * 12 + 10}%`;
      layer.style.left = `${i * 8 + 5}%`;
      layer.style.backgroundImage = `url(${baseImages["1ci4qIfZ1Yo-unsplash.jpg"]})`;
    });

    // Scroll behavior
    listen("scroll", window, () => {
      const scrollTop = window.pageYOffset;
      parallaxLayers.forEach(({ selector, speed }) => {
        const layer = select(selector);
        const yPos = -(scrollTop * speed);
        layer.style.transform = `translateY(${yPos}px)`;
      });
    });

    // === GLOBAL CONTROLS ===
    const sizeControl = select("#sizeControl");
    const bgRadios = document.querySelectorAll('input[name="bgChoice"]');
    const layerSpeedControls = select("#layerSpeedControls");
    const headerDisplay = select('.header');
    // Generate per-layer speed sliders
    parallaxLayers.forEach((layer, i) => {
      const wrapper = document.createElement("div");
      wrapper.className = "layer-controls";

      const title = document.createElement("h4");
      title.textContent = `Layer ${i + 1}`;
      wrapper.appendChild(title);

      const slider = document.createElement("input");
      slider.type = "range";
      slider.min = -3;
      slider.max = 3;
      slider.step = 0.1;
      slider.value = layer.speed;
      slider.addEventListener("input", () => {
        layer.speed = parseFloat(slider.value);
      });

      wrapper.appendChild(slider);
      layerSpeedControls.appendChild(wrapper);
    });

    // Apply global size to all layers
    listen("input", sizeControl, () => {
      document.querySelectorAll(".parallax").forEach(layer => {
        layer.style.setProperty("--parallax-size", `${sizeControl.value}px`);
      });
    });
    // Change global background for all layers
    bgRadios.forEach(radio => {
      listen("change", radio, () => {
        if (radio.checked) {
          headerDisplay.classList.add(bgImages[radio.value]);
          const imageUrl = baseImages[radio.value];
          document.querySelectorAll(".parallax").forEach(layer => {
            layer.style.backgroundImage = `url(${imageUrl})`;
          });
        }
      });
    });
  </script>
</body>
</html>
